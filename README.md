# 98DEMO_DOS
PC-9800シリーズ
デモンストレーションプログラム

に収録されている MS-DOS 3.1のIPLを使って、MS-DOSのディスクを作ろう

# 対象となるディスク
内容が 「パソコンレストラン98」かつIPLがMS-DOS 3.1のもの

## IPLがMS-DOS 3.1の確認方法
1. 何らかの方法で吸い出してBKDSK / RAW / HDMイメージファイルにする

パソコンレストラン98はMS-DOS形式なのでWindows 11 + 3モードFDD + RWFD でイメージ化できます。

2. DiskExplorerを使って吸い出したイメージファイルを開く

3. IO.SYSをStirlingなどのバイナリエディタで開く

4. アドレス 2D6C 付近に ”MS-DOS ﾊﾞｰｼﾞｮﾝ 3.10”と書いてあるか確認する

# 手順 (実機編)
## 用意するもの
* デモディスクの内容をDISKCOPYしたフロッピー
* このレポジトリのBINフォルダにあるもの

## 手順
1. FD内のファイルを全て消す。IO.SYSとMSDOS.SYSは残る
2. BINフォルダにあるものを全部FDへコピーする
3. ENJOY...

# 手順 (吸出しイメージ編)
## 用意するもの
* デモディスクのイメージファイル (DiskExplorerで開ける形式で)
* このレポジトリのBINフォルダにあるもの
* DiskExplorer

## 手順
1. DiskExplorerでデモディスクのイメージファイルを開く
2. IO.SYSとMSDOS.SYS以外を全部消す
3. BINフォルダにあるものを全部FDへ入れる
4. ENJOY...

# FORMATは？
ないからVectorから適当に拾ってきてください

https://www.vector.co.jp/vpack/filearea/dos/util/disk/copy_fmt/

一番上にあるfo,syは正常に動く事を確認してます。

# もっと本物に近づけたい
デモ版IPLはPS98-011のIO.SYSを改造したものなのでバイナリエディタでIO.SYSを書き換えるとある程度近づく

## 起動メッセージを表示したい
IO.SYS アドレス 2D2E; 00 -> 4E

## 下にあるファンクションのナビゲートバーを表示したい
IO.SYS アドレス 0111; 00 -> 01

## カーソルを表示したい
IO.SYS アドレス 8BE1 - 8BE3; 90 90 90 -> E8 04 02

他にも数ヵ所で変更があるけど何が変更されているかは知りません